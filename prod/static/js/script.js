'use strict';(function(){window.xs=window.innerWidth<=1024?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false;window.touch=document.querySelector('html').classList.contains('touchevents');window.animation={};window.animation.fadeIn=function(elem,ms,cb){var d=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'block';if(!elem)return;elem.style.opacity=0;elem.style.display=d;if(ms){var opacity=0;var timer=setInterval(function(){opacity+=50/ms;if(opacity>=1){clearInterval(timer);opacity=1;if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=1;if(cb)cb()}};window.animation.fadeOut=function(elem,ms,cb){if(!elem)return;elem.style.opacity=1;if(ms){var opacity=1;var timer=setInterval(function(){opacity-=50/ms;if(opacity<=0){clearInterval(timer);opacity=0;elem.style.display='none';if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=0;elem.style.display='none';if(cb)cb()}};window.animation.scrollTo=function(to,duration){if(duration<=0)return;var element=document.documentElement,difference=to-element.scrollTop,perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;window.animation.scrollTo(to,duration-10)},10)};window.animation.visChecker=function(el){var rect=el.getBoundingClientRect();return(//rect.top >= 0 &&
//rect.left >= 0 &&
rect.bottom-el.offsetHeight*.35<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth))};window.site={};window.site.form={init:function init(){var _th=this,inputs=document.querySelectorAll('.common__input, .common__textarea'),forms=document.querySelectorAll('form'),selectors=document.querySelectorAll('.js-select'),choicesArr=[],digitsInput=document.querySelectorAll('.js-digits');$('.js-phone').mask('+7(999) 999-9999');function emptyCheck(event){event.target.value.trim()===''?event.target.classList.remove('notempty'):event.target.classList.add('notempty')}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=inputs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;item.addEventListener('keyup',emptyCheck);item.addEventListener('blur',emptyCheck)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(document.querySelectorAll('.js-common-file').length){var commonFile=document.querySelectorAll('.js-common-fileinput'),commonFileDelete=document.querySelectorAll('.js-common-filedelete');var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{var _loop=function _loop(){var fileInp=_step2.value;fileInp.addEventListener('change',function(e){var el=fileInp.nextElementSibling,path=fileInp.value.split('\\'),pathName=path[path.length-1].split('');pathName.length>=30?pathName=pathName.slice(0,28).join('')+'...':pathName=pathName.join('');el.textContent=pathName;el.classList.add('choosed')})};for(var _iterator2=commonFile[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){_loop()}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{var _loop2=function _loop2(){var fileDelete=_step3.value;fileDelete.addEventListener('click',function(e){var el=fileDelete.previousElementSibling,fileInput=fileDelete.previousElementSibling.previousElementSibling;el.textContent=el.getAttribute('data-default');fileInput.value='';el.classList.remove('choosed')})};for(var _iterator3=commonFileDelete[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){_loop2()}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{var _loop3=function _loop3(){var form=_step4.value;form.addEventListener('submit',function(e){return!_th.checkForm(form)&&e.preventDefault()&&e.stopPropagation()})};for(var _iterator4=forms[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){_loop3()}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=selectors[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var selector=_step5.value;var choice=new Choices(selector,{searchEnabled:false,itemSelectText:'',position:'bottom'});choicesArr.push(choice)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=digitsInput[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var digitInput=_step6.value;digitInput.addEventListener('keydown',function(e){var validArr=[46,8,9,27,13,110,190];if(validArr.indexOf(e.keyCode)!==-1||e.keyCode==65&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==67&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==88&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode>=35&&e.keyCode<=39){return}if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}})}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}return this},checkForm:function checkForm(form){var checkResult=true;var warningElems=form.querySelectorAll('.warning');if(warningElems.length){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=warningElems[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var warningElem=_step7.value;warningElem.classList.remove('warning')}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=form.querySelectorAll('input, textarea, select')[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var elem=_step8.value;if(elem.getAttribute('data-req')){switch(elem.getAttribute('data-type')){case'tel':var re=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'email':var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!re.test(elem.value)){elem.classList.add('warning');checkResult=false}break;case'file':if(elem.value.trim()===''){elem.parentNode.classList.add('warning');checkResult=false}break;default:if(elem.value.trim()===''){elem.classList.add('warning');checkResult=false}break;}}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=form.querySelectorAll('input[name^=agreement]')[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var item=_step9.value;if(!item.checked){item.classList.add('warning');checkResult=false}}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}return checkResult}}.init();window.site.obj={partners:function partners(){var partnersSwiper=new Swiper('.js-partners',{loop:true,speed:700,slidesPerView:5,spaceBetween:50,parallax:true,navigation:{nextEl:'.partners__carover .swiper-button-next',prevEl:'.partners__carover .swiper-button-prev'},breakpoints:{1400:{spaceBetween:30},1300:{slidesPerView:4,spaceBetween:30},960:{slidesPerView:3,spaceBetween:30},760:{slidesPerView:2,spaceBetween:30},575:{slidesPerView:1,spaceBetween:30}}})},map:function map(){var coords=document.querySelector('.js-map').getAttribute('data-coords').split(','),myLatlng=new google.maps.LatLng(+coords[0],+coords[1]),mapOptions={zoom:17.15,center:myLatlng,disableDefaultUI:true};var map=new google.maps.Map(document.querySelector('.js-map'),mapOptions);var marker=new google.maps.Marker({position:myLatlng,icon:'static/i/pin.png'});marker.setMap(map)},videos:function videos(){var speakersSwiper=new Swiper('.js-videos',{speed:700,slidesPerView:'auto',spaceBetween:50,navigation:{nextEl:'.videos__carover .swiper-button-next',prevEl:'.videos__carover .swiper-button-prev'},breakpoints:{1560:{spaceBetween:30},960:{spaceBetween:30,slidesPerView:2},600:{spaceBetween:30,slidesPerView:1}}})},speakers:function speakers(){var speakersSwiper=new Swiper('.js-speakers',{speed:700,slidesPerView:2,slidesPerColumn:2,spaceBetween:50,navigation:{nextEl:'.program__speakers-carover .swiper-button-next',prevEl:'.program__speakers-carover .swiper-button-prev'},breakpoints:{1560:{spaceBetween:30},1200:{slidesPerView:1,slidesPerColumn:1,spaceBetween:30},960:{slidesPerView:3,slidesPerColumn:1,spaceBetween:30},760:{slidesPerView:2,slidesPerColumn:1,spaceBetween:30},575:{slidesPerView:1,slidesPerColumn:2,spaceBetween:30}}})},search:function search(){var searchIcon=document.querySelector('.js-search-icon'),searchEl=document.querySelector('.js-search'),searchInput=document.querySelector('.js-search-input');function searchBlur(){searchEl.classList.remove('open');searchInput.removeEventListener('blur',searchBlur)}searchIcon.addEventListener('click',function(e){searchEl.classList.add('open');searchInput.focus();searchInput.addEventListener('blur',searchBlur);e.preventDefault()})},init:function init(){var burgerEl=document.querySelector('.js-burger'),html=document.querySelector('html'),tweenBg=document.querySelector('.js-tweenbg'),headerEl=document.querySelector('.header'),headerHeight=parseInt(getComputedStyle(headerEl)['height']),toNext=document.querySelector('.js-tonext'),elemsToCheck=['.news__elem-imgover','.js-scroll-imgover','.about__steps-elem'];if(document.querySelector('.js-speakers'))this.speakers();if(document.querySelector('.js-partners'))this.partners();if(document.querySelector('.js-map'))this.map();if(document.querySelector('.js-search'))this.search();if(document.querySelector('.js-videos'))this.videos();window.addEventListener('resize',function(){window.xs=window.innerWidth<=960?true:false;window.mobile=window.innerWidth<=480?true:false;window.xsHeight=window.innerHeight<=540?true:false});window.addEventListener('scroll',function(){var programEl=document.querySelector('.program');if(programEl.getBoundingClientRect().top-headerHeight<=0){headerEl.classList.add('transform')}else{headerEl.classList.remove('transform')}var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=elemsToCheck[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var item=_step10.value;var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=document.querySelectorAll(item)[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var elem=_step11.value;if(window.animation.visChecker(elem)){elem.classList.add('visible')}}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return()}}finally{if(_didIteratorError11){throw _iteratorError11}}}}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return()}}finally{if(_didIteratorError10){throw _iteratorError10}}}});burgerEl.addEventListener('click',function(e){html.classList.toggle('burgeropen');burgerEl.classList.toggle('open');e.preventDefault()});if(document.querySelectorAll('.js-tweenbg').length){window.addEventListener('mousemove',function(event){var centerX=Math.round(window.innerWidth/2),centerY=Math.round(window.innerHeight/2),diffX=-(event.clientX-centerX)/centerX,diffY=-(event.clientY-centerY)/centerY;TweenMax.to(tweenBg,1,{'left':Math.round(tweenBg.getAttribute('data-round')*diffX),'top':Math.round(tweenBg.getAttribute('data-round')*diffY),ease:Expo.easeOut})})}if(toNext){toNext.addEventListener('click',function(e){window.animation.scrollTo(document.querySelector('.program').offsetTop,1000);e.preventDefault()})}$('[data-fancybox]').fancybox({i18n:{en:{CLOSE:'\u0417\u0430\u043A\u0440\u044B\u0442\u044C'}},touch:false});var eventScroll=void 0;try{eventScroll=new Event('scroll')}catch(e){eventScroll=document.createEvent('Event');var doesnt_bubble=false,isnt_cancelable=false;eventScroll.initEvent('scroll',doesnt_bubble,isnt_cancelable)}window.dispatchEvent(eventScroll);return this}};Pace.on('hide',function(){setTimeout(function(){window.site.obj.init()},200)})})();